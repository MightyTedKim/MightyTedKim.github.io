---
layout: post
title:  "FlexDashboard"
date:   2018-05-04 00:00:00 +0530
img: project2.png
---



**학원에서 처음 웹 프로젝트를 했다.**

**그 중에서 지도를 다루는 페이지가 있었는데 재미났다.ㅋㅋㅋ**



'직방'을 참고했고, 앱으로는 '레디투플라이'에 영감을 받았다.

주제는 '드론 비행 가능 구역 공유' 로 잡았다.



Spring 사용했고

GIS는 네이버 v3 API를 사용했다.

(공역 정보는 Vworld 국가 공간정보 플랫폼)



틀은 bootstrap 사용했고



이것저것 욕심이 생겨서 추가해봤다.

![img](https://blogfiles.pstatic.net/MjAxODA5MTRfMTUz/MDAxNTM2OTA4NDgxMTgy.cvZZtnI2QpuuOLDEixhsnOHz1fj678nPb6hLxrlYpkYg.U5s6LQv-0NV9dMb9IId1PcV1-u9Mkc29F2Bo-vtZSZAg.GIF.deet1107/%EB%93%9C%EB%A1%A0%EB%82%98%EB%93%A4%EC%9D%B4_%281%29.gif)



**크게 신경 쓴 부분은 아래 3가지다.**

**당연히 지도가 main이고, 여기에 뿌릴 공역 정보를 API로 얻어왔다.**

**그리고 객체 생성, 공역 표시에 시간이 걸려서 로딩속도 에 신경을 썼다.**



**1. 지도**

처음 API를 사용해본 거엿어 신기했다.

지도는 카카오로 시작해, 구글로 넘어갔다가 네이버로 정착했다. 거의 비슷 비슷하다.

(자료는 구글이 많아서, 구글 맵으로 구현해보고 네이버로 바꿨다.)



**2. 공역 정보**

공역 정보는 Vworld에서 WFS를 사용해 Geojson을 가져왔다. 좌표계, geojson에 대해서 공부했는데

처음에는 너무 너무 어려웠다.WFS는 web feature service다

웹에서 바로 가져올 수 있었는데, proxy우회해야되서 0.5초 정도가 걸렸다(java에서).

그래서 눈물을 머금고 DB에 저장했다.(geojson)

**공역 정보(geojson) 네이버에 구현하는 방법:** [https://jsfiddle.net/MightyTedKim/xo6gd5w9/](https://jsfiddle.net/xpvt214o/786062/)

jsfiddle에 심심해서 정리했다.



**3. 로딩 속도**

로딩 속도가 너무 길었다. 지도들이 뜨는 시간도 길고, 공역 정보가 표시되는 것도 길었다.

아직 DB 왔다갔다하면서 목록을 뽑는거는 하지 않았고, 그냥 있는 거 다 가져와서 뿌려가지고 그런가보다

(뿌린거에 JS로 sorting 했다. 귀차니즘 ㅜ)

**- 해결책 1: 공역 파일**

mapshaper.org에서 13% simplify하니 크기가 1/4로 줄었고 속도도 빨라졌다.

공역 파일을 다 보여주지 않고, 그냥 버튼으로 만들었다.

**- 해결책 2: 지도 Static**

첫화면에 뿌려지는 지도를 Static으로 바꿨다. 

지도 객체 하나에 static 이미지가 열개 넘개 나오니까 속도가 10배 이상 빨라진거 같다. 하나만 불러오면 되니까

**- 해결책 3: 도로/항공뷰**

파노라마(도로/항공뷰)도 개별로 다 뽑았었는데, 하나만 띄우고 지도 누르면 변하게 바꿨다.

**- 해결책 4: 날씨 위젯**

​           좌표를 클릭하면 날씨 정보를 띄워주는 위젯을 만들었는데, 버렸다.

​          1) 해외 사이트의 자동 위젯 <https://weatherwidget.io/> 의 js를 약간 고쳐서 지도 클릭하면 뜨게 했는데 1초 정도 걸렸다.

​          2) 기상청 들어갔는데 java 거치고 이것저것 해야되서 속도가 느렸다.



그놈의 로딩 속도 ㅜ 

그래서 속도 무시하고 구현하고 싶었던 거는 new window로 뽑았다. ㅋㅋ

(역시 사람은 하고 싶은거 해야되)



이제 드론 날리러 가야지ㅋ

\+ 모임 등록하는 페이지에서는 지도 좌표를 DB에 저장하도록 구현했답



기본적인 지도 구현하다가 막히는 분들 댓글 달아주시면 답해드릴게요ㅎ

서초 근처로 오셔서 커피 한잔 사주시면 1시간 정도는.. ㅋㅋ



<과정이 끝날 쯤 학원에서 이렇게 정리해줬다.>

링크 : 

[![img](https://dthumb-phinf.pstatic.net/?src=%22https%3A%2F%2Fplaydata.io%2Fwp-content%2Fuploads%2F2018%2F11%2F%25EB%2594%25A5%25EB%259F%25AC%25EB%258B%259D1%25EA%25B8%25B0_%25EB%2593%259C%25EB%25A1%25A0%25ED%2594%25BC%25ED%2581%25AC%25EB%258B%2589_%25EC%258D%25B8%25EB%2584%25A4%25EC%259D%25BC-1024x922.jpg%22&type=f560_336)](https://playdata.io/archives/7109)